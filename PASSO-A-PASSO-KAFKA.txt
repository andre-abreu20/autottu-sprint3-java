â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                              â•‘
â•‘        â˜•  PASSO A PASSO: KAFKA COM DOCKER - AUTOTTU          â•‘
â•‘                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


ğŸ“¦ PREPARO INICIAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1. Abra o PowerShell na pasta do projeto:
   cd "C:\Users\T-GAMER\Downloads\Arquivos da Aula - 12_09 - Turma_H 1\autottu"

2. Verifique o Docker:
   docker --version
   docker ps


ğŸš€ SUBIR KAFKA EM 1 COMANDO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
.\docker-kafka-setup-completo.ps1

(O script baixa `apache/kafka:3.7.0`, formata automaticamente o volume KRaft, cria o container kafka-autottu, habilita as configs no application.properties e ativa health checks.)


â–¶ï¸ REINICIAR A APLICAÃ‡ÃƒO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
mvn clean install
mvn spring-boot:run

Deixe o console visÃ­vel (vamos observar os logs ğŸ“¡ [KAFKA] ...)


ğŸ§ª GERAR EVENTOS PARA TESTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1. http://localhost:8080
2. Login: admin / admin123
3. Check-ins â†’ "Registrar Check-in" â†’ preencher â†’ salvar
   âœ” Console: "ğŸ“¡ [KAFKA] Evento Check-in enviado..."
   âœ” Console: "ğŸ¯ ======= EVENTO KAFKA: CHECK-IN ======="

4. ManutenÃ§Ãµes â†’ "Nova ManutenÃ§Ã£o" â†’ preencher â†’ salvar
   âœ” Console: "ğŸ“¡ [KAFKA] Evento ManutenÃ§Ã£o enviado..."
   âœ” Console: "ğŸ¯ ====== EVENTO KAFKA: MANUTENÃ‡ÃƒO ======"

(DÃ¡ para repetir com Auditoria se quiser ver o tÃ³pico `autottu-auditoria-eventos`.)


ğŸ” CONFIRMAR NO BROKER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
.\docker-kafka-status.ps1

SaÃ­da esperada:
- kafka-autottu     Up ...     0.0.0.0:9092->9092/tcp
- Lista de tÃ³picos: autottu-checkin-eventos, autottu-manutencao-eventos, autottu-auditoria-eventos

Comandos extras:
- docker exec kafka-autottu /opt/kafka/bin/kafka-topics.sh --list --bootstrap-server localhost:9092
- docker exec kafka-autottu /opt/kafka/bin/kafka-console-consumer.sh --topic autottu-checkin-eventos --from-beginning --bootstrap-server localhost:9092


ğŸ›‘ PARAR / ğŸŸ¢ INICIAR / ğŸ—‘ REMOVER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Parar:      .\docker-kafka-stop.ps1
Iniciar:    .\docker-kafka-start.ps1
Logs:       .\docker-kafka-logs.ps1
Remover:    .\docker-kafka-remove.ps1 (remove volume kafka_autottu_data tambÃ©m)


ğŸ†˜ PROBLEMAS COMUNS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âŒ Connection refused?  â†’ kafka-autottu nÃ£o estÃ¡ rodando. Use docker ps, docker start kafka-autottu
âŒ Health DOWN?         â†’ Kafka demorou a subir. Aguarde 10s e atualize /telemetria
âŒ Sem logs [KAFKA]?    â†’ Verifique se application.properties estÃ¡ com spring.profiles.active comentado e reinicie
âŒ Porta 9092 em uso?   â†’ netstat -ano | findstr :9092 â†’ taskkill /PID <pid> /F


âœ… RESUMO FINAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1. .\docker-kafka-setup-completo.ps1
2. mvn spring-boot:run
3. Registrar Check-in / ManutenÃ§Ã£o
4. Ver logs ğŸ“¡ [KAFKA] e ğŸ¯ ...
5. Conferir tÃ³picos com .\docker-kafka-status.ps1

Kafka + RabbitMQ ativos 100% offline! ğŸï¸â˜•
